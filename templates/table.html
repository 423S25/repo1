<link rel="stylesheet" href="styles/inventory.css">

{% from "macros.html" import inventory_item_bar %}

<div id="inventory-table" class="inventory-table">
    {% for product in product_list %}
        {% if loop.last and page_flag == true %}
    <!-- This is how i can think to manage with all the different routes: PLEASE SOMEONE HAVE A BETTER IDEA
         I tried the if else inside the div tags but it messed it up
            {% if request.path == "/filter" %}
                <div class="inventory-table-row box-shadow-small"
                hx-get="/filter?page={{ page + 1 }}"
                hx-trigger="revealed delay:1s"
                hx-target="body">
            {% else %}
                <div class="inventory-table-row box-shadow-small"
                hx-get="/?page={{ page + 1 }}"
                hx-trigger="revealed delay:1s"
                hx-target="body">
            {% endif %}
    --> <div class="inventory-table-row box-shadow-small"
           hx-get="/?page={{ page + 1 }}"
           hx-trigger="revealed delay:1s"
           hx-target="body">
        {% else %}
            <div class="inventory-table-row box-shadow-small">
        {% endif %}
            <img alt="Map" src="icons/map.svg" class="inventory-item-icon"/>
            <div class="center-vert">
                <span class="inventory-item-name">{{ product.product_name }}</span>
                {% if product.category.name is not none %}
                    <span>{{ product.category.name }}</span>
                {% endif %}

            </div>
            <div class="center-all" style="padding: 0 25px;">
                {{ inventory_item_bar(product.inventory, product.ideal_stock) }}
                <span style="font-weight: bold;">{{ product.inventory }}/{{ product.ideal_stock }}</span>
            </div>
            <div class="center-all">Last Updated {{ product.last_updated.strftime("%m/%d/%y") }}</div>
            <a class="inventory-item-link" href="/{{ product.get_id() }}">
                <img src="icons/arrow_up_right.svg" alt="Arrow Up Right"/>
            </a>
        </div>

    {% endfor %}
    <form id="paginationForm" method="GET" action="/">
    <input type="hidden" name="page" id="page" value="{{ page }}">
    </form>
</div>