{% extends "security/base.html" %}
{% from "security/_macros.html" import render_field_with_errors, render_field %}

{% block content %}
{% include "security/_messages.html" %}
<h1>Register New User</h1>
<form action="/users" method="POST" name="register_user_form">
  {{ register_user_form.hidden_tag() }}
  {{ render_field_with_errors(register_user_form.email) }}
  {{ render_field_with_errors(register_user_form.username) }}
  {{ render_field_with_errors(register_user_form.password) }}
  {% if register_user_form.password_confirm %}
  {{ render_field_with_errors(register_user_form.password_confirm) }}
  {% endif %}
  {{ render_field(register_user_form.submit) }}
</form>
<h2>Current Users</h2>
<table border="1">
  <tr>
    <th>Email</th>
    <th>Username</th>
  </tr>
  {% for user in user_list %}
  <tr>
    <td>{{ user.email }}</td>
    <td>{{ user.username }}</td>
  </tr>
  {% endfor %}
</table>
<a href="/">Back to inventory</a>
<!-- {% include "security/_menu.html" %} -->
{% endblock %}